{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      naverLogin: null\n    };\n  },\n  mounted() {\n    let userData = {};\n    this.naverLogin = new window.naver.LoginWithNaverId({\n      clientId: \"ZpkAE5YTiolSaFISr_CV\",\n      // 개발자센터에 등록한 Client ID\n      callbackUrl: \"http://localhost:8080/naverlogin\",\n      // 개발자센터에 등록한 callback Url\n      isPopup: false,\n      // 팝업을 통한 연동처리 여부\n      loginButton: {\n        color: \"green\",\n        type: 3,\n        height: 60\n      } // 로그인 버튼의 타입을 지정\n    });\n\n    // 설정 정보를 초기화 연동을 준비\n    this.naverLogin.init();\n    this.naverLogin.getLoginStatus(status => {\n      if (status) {\n        // 필수적으로 받아야하는 프로필 정보가 있다면 callback 처리 시점에 체크\n        var email = this.naverLogin.user.getEmail();\n        var nickname = this.naverLogin.user.getNickName();\n        var gender = this.naverLogin.user.getGender();\n        var age = this.naverLogin.user.getAge();\n        /* var mobile = this.naverLogin.user.getMobile(); */\n\n        userData = {\n          email,\n          nickname,\n          gender,\n          age\n        };\n        if (email == undefined || email == null) {\n          alert(\"이메일은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        }\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (nickname == undefined || nickname == null) {\n        /* alert(\"별명은 필수 정보입니다. 정보 제공을 동의해주세요.\"); */\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (gender == undefined || gender == null) {\n        /* alert(\"성별은 필수 정보입니다. 정보 제공을 동의해주세요.\"); */\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (age == undefined || age == null) {\n        /* alert(\"연령대는 필수 정보입니다. 정보 제공을 동의해주세요.\"); */\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      this.naverlogin2(userData);\n\n      // window.location.href = '/';\n    });\n  },\n\n  methods: {\n    logout() {\n      const accessToken = this.naverLogin.accessToken.accessToken;\n      const url = '/oauth2.0/token?grant_type=delete&client_id=ZpkAE5YTiolSaFISr_CV&client_secret=J_ia7bQ3W_&access_token=${accessToken}&service_provider=NAVER';\n      axios.get(url).then(res => {\n        console.log(res.data);\n      });\n    },\n    naverlogin2(userData) {\n      const email = userData.email;\n      axios({\n        url: \"http://localhost:3000/auth/naverlogin\",\n        method: \"POST\",\n        data: {\n          email: userData.email,\n          nick: userData.nickname,\n          sex: userData.gender,\n          agegroup: userData.age,\n          provider: 'naver'\n        }\n      }).then(async res => {\n        this.pullData(email);\n      });\n    },\n    pullData(email) {\n      axios({\n        url: \"http://localhost:3000/auth/naverData\",\n        method: \"POST\",\n        data: {\n          email: email\n        }\n      }).then(async res => {\n        localStorage.setItem('userID', res.data.email);\n        localStorage.setItem('userNick', res.data.nick);\n        localStorage.setItem('userProvider', res.data.provider);\n        window.location.href = '/';\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","naverLogin","mounted","userData","window","naver","LoginWithNaverId","clientId","callbackUrl","isPopup","loginButton","color","type","height","init","getLoginStatus","status","email","user","getEmail","nickname","getNickName","gender","getGender","age","getAge","undefined","alert","reprompt","console","log","naverlogin2","methods","logout","accessToken","url","get","then","res","method","nick","sex","agegroup","provider","pullData","localStorage","setItem","location","href"],"sources":["C:\\Users\\Lim\\Desktop\\BOOK_0728\\MOONMOON\\vue_front\\src\\views\\NaverLogin.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div id=\"naverIdLogin\">\r\n        <button type=\"button\" @click=\"logout\">로그아웃</button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  <script>\r\n  import axios from \"axios\";\r\n  export default {\r\n    data(){\r\n      return {\r\n        naverLogin: null,\r\n      };\r\n    },\r\n    mounted() {\r\n      let userData = {};\r\n      this.naverLogin = new window.naver.LoginWithNaverId({\r\n        clientId: \"ZpkAE5YTiolSaFISr_CV\", // 개발자센터에 등록한 Client ID\r\n        callbackUrl: \"http://localhost:8080/naverlogin\", // 개발자센터에 등록한 callback Url\r\n        isPopup: false, // 팝업을 통한 연동처리 여부\r\n        loginButton: {\r\n          color: \"green\", type: 3, height: 60 },  // 로그인 버튼의 타입을 지정\r\n      });\r\n  \r\n      // 설정 정보를 초기화 연동을 준비\r\n      this.naverLogin.init();\r\n  \r\n      this.naverLogin.getLoginStatus((status) => {\r\n        if (status) {\r\n  \r\n          // 필수적으로 받아야하는 프로필 정보가 있다면 callback 처리 시점에 체크\r\n          var email = this.naverLogin.user.getEmail();\r\n          var nickname = this.naverLogin.user.getNickName();\r\n          var gender = this.naverLogin.user.getGender();\r\n          var age = this.naverLogin.user.getAge();\r\n          /* var mobile = this.naverLogin.user.getMobile(); */\r\n          \r\n          \r\n          userData = {email, nickname, gender, age};\r\n  \r\n          if (email == undefined || email == null) {\r\n            alert(\"이메일은 필수 정보입니다. 정보 제공을 동의해주세요.\");\r\n            // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\r\n            this.naverLogin.reprompt();\r\n            return;\r\n          }\r\n        } else {\r\n          console.log(\"callback 처리에 실패하였습니다.\");\r\n        }\r\n        \r\n        if (nickname == undefined || nickname == null) {          \r\n            /* alert(\"별명은 필수 정보입니다. 정보 제공을 동의해주세요.\"); */\r\n            // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\r\n            this.naverLogin.reprompt();\r\n            return;\r\n          } else {\r\n          console.log(\"callback 처리에 실패하였습니다.\");\r\n        }\r\n  \r\n        if (gender == undefined || gender == null) {\r\n            /* alert(\"성별은 필수 정보입니다. 정보 제공을 동의해주세요.\"); */\r\n            // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\r\n            this.naverLogin.reprompt();\r\n            return;\r\n          } else {\r\n          console.log(\"callback 처리에 실패하였습니다.\");\r\n        }\r\n  \r\n        if (age == undefined || age == null) {\r\n            /* alert(\"연령대는 필수 정보입니다. 정보 제공을 동의해주세요.\"); */\r\n            // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\r\n            this.naverLogin.reprompt();\r\n            return;\r\n          } else {\r\n          console.log(\"callback 처리에 실패하였습니다.\");\r\n        }\r\n  \r\n        this.naverlogin2(userData);\r\n  \r\n        // window.location.href = '/';\r\n  \r\n  \r\n      });\r\n    },\r\n    methods: {\r\n      logout() {\r\n        const accessToken = this.naverLogin.accessToken.accessToken;\r\n        const url='/oauth2.0/token?grant_type=delete&client_id=ZpkAE5YTiolSaFISr_CV&client_secret=J_ia7bQ3W_&access_token=${accessToken}&service_provider=NAVER';\r\n  \r\n        axios.get(url).then((res) => {\r\n          console.log(res.data);\r\n        });\r\n  \r\n        \r\n  \r\n      },\r\n      naverlogin2(userData) {\r\n              const email = userData.email;\r\n  \r\n              axios({\r\n                  url: \"http://localhost:3000/auth/naverlogin\",\r\n                  method: \"POST\",\r\n                  data: {\r\n                      email: userData.email,\r\n                      nick: userData.nickname,\r\n                      sex: userData.gender,\r\n                      agegroup: userData.age,\r\n                      provider: 'naver'\r\n                  },\r\n  \r\n              }).then(async (res)=> {\r\n                  this.pullData(email)\r\n              })\r\n          },\r\n      pullData(email) {\r\n        axios({\r\n                  url: \"http://localhost:3000/auth/naverData\",\r\n                  method: \"POST\",\r\n                  data: {\r\n                      email: email,\r\n                  }\r\n              }).then(async (res)=> {\r\n                  localStorage.setItem('userID', res.data.email);\r\n                  localStorage.setItem('userNick', res.data.nick);\r\n                  localStorage.setItem('userProvider', res.data.provider);\r\n  \r\n                  window.location.href = '/';\r\n              })\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  <style>\r\n  #naverIdLogin {\r\n    display: none;\r\n  }\r\n  </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}