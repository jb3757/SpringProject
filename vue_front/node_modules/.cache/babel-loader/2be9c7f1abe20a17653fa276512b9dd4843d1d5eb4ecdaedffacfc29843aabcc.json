{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"survey\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"survey_container\"\n};\nconst _hoisted_3 = {\n  class: \"survey_container_header\"\n};\nconst _hoisted_4 = {\n  class: \"survey_state_dots\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"state_title\"\n}, \"추천 받고싶은 대분류를 선택하세요 (최대 5개)\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"survey_container_main\"\n};\nconst _hoisted_7 = {\n  class: \"survey_container_footer\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"survey_container\"\n};\nconst _hoisted_9 = {\n  class: \"survey_container_header\"\n};\nconst _hoisted_10 = {\n  class: \"survey_state_dots\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"state_title\"\n}, \"추천 받고싶은 키워드를 선택하세요 (최대 5개)\", -1 /* HOISTED */);\nconst _hoisted_12 = {\n  class: \"state_myselect_keyword\"\n};\nconst _hoisted_13 = {\n  class: \"survey_container_main\"\n};\nconst _hoisted_14 = {\n  class: \"survey_container_footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_GnbBar = _resolveComponent(\"GnbBar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_GnbBar), _createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" 대분류 \"), $data.currentPage == 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(2, i => {\n    return _createElementVNode(\"span\", {\n      key: i,\n      class: _normalizeClass(['survey_state_dot', {\n        survey_selected: i === $data.currentPage\n      }])\n    }, null, 2 /* CLASS */);\n  }), 64 /* STABLE_FRAGMENT */))]), _hoisted_5]), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.category, (item, i) => {\n    return _openBlock(), _createElementBlock(\"button\", {\n      onClick: _cache[0] || (_cache[0] = (...args) => $options.selectKeyword && $options.selectKeyword(...args)),\n      class: \"survey_select_btn\",\n      key: item.id\n    }, _toDisplayString(item.top), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.nextPage && $options.nextPage(...args)),\n    class: \"survey_next_btn\"\n  }, \"다음\")])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 소분류 \"), $data.currentPage == 2 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(2, i => {\n    return _createElementVNode(\"span\", {\n      key: i,\n      class: _normalizeClass(['survey_state_dot', {\n        survey_selected: i === $data.currentPage\n      }])\n    }, null, 2 /* CLASS */);\n  }), 64 /* STABLE_FRAGMENT */))]), _hoisted_11, _createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.selectedMainKeywords, (item, i) => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      class: \"survey_myselect_btn\",\n      key: i\n    }, _toDisplayString(item), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.selectedMiddleKeywords, (item, i) => {\n    return _openBlock(), _createElementBlock(\"button\", {\n      onClick: _cache[2] || (_cache[2] = (...args) => $options.selectSubKeyword && $options.selectSubKeyword(...args)),\n      class: \"survey_select_btn\",\n      key: i\n    }, _toDisplayString(item), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.prevPage && $options.prevPage(...args)),\n    class: \"survey_next_btn\"\n  }, \"이전\"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.sendSelectedKeyword && $options.sendSelectedKeyword(...args)),\n    class: \"survey_next_btn\"\n  }, \"선택 완료\")])])) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createVNode","_component_GnbBar","_hoisted_1","_createCommentVNode","$data","currentPage","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","i","key","_normalizeClass","survey_selected","_hoisted_5","_hoisted_6","category","item","onClick","_cache","args","$options","selectKeyword","id","top","_hoisted_7","nextPage","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","selectedMainKeywords","_hoisted_13","selectedMiddleKeywords","selectSubKeyword","_hoisted_14","prevPage","sendSelectedKeyword"],"sources":["C:\\Users\\Lim\\Desktop\\BOOK_0728\\MOONMOON\\vue_front\\src\\views\\survey.vue"],"sourcesContent":["<style src=\"../assets/css/survey.css\"></style>\r\n\r\n<template>\r\n    <GnbBar />\r\n    <div class=\"survey\">\r\n        <!-- 대분류 -->\r\n        <div v-if=\"currentPage == 1\" class=\"survey_container\">\r\n            <div class=\"survey_container_header\">\r\n                <div class=\"survey_state_dots\">\r\n                    <span v-for=\"i in 2\" :key=\"i\" :class=\"['survey_state_dot', { survey_selected: i === currentPage }]\"></span>\r\n                </div>\r\n                <h2 class=\"state_title\">추천 받고싶은 대분류를 선택하세요 (최대 5개)</h2>\r\n            </div>\r\n            <div class=\"survey_container_main\">\r\n                <button @click=\"selectKeyword\" class=\"survey_select_btn\" v-for=\"(item, i) in category\" :key=\"item.id\">{{ item.top }}</button>\r\n            </div>\r\n            <div class=\"survey_container_footer\">\r\n                <button @click=\"nextPage\" class=\"survey_next_btn\">다음</button>\r\n            </div>\r\n        </div>\r\n        <!-- 소분류 -->\r\n        <div v-if=\"currentPage == 2\" class=\"survey_container\">\r\n            <div class=\"survey_container_header\">\r\n                <div class=\"survey_state_dots\">\r\n                    <span v-for=\"i in 2\" :key=\"i\" :class=\"['survey_state_dot', { survey_selected: i === currentPage }]\"></span>\r\n                </div>\r\n                <h2 class=\"state_title\">추천 받고싶은 키워드를 선택하세요 (최대 5개)</h2>\r\n                <div class=\"state_myselect_keyword\">\r\n                    <span class=\"survey_myselect_btn\" v-for=\"(item, i) in selectedMainKeywords\" :key=\"i\">{{ item }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"survey_container_main\">\r\n                <button @click=\"selectSubKeyword\" class=\"survey_select_btn\" v-for=\"(item, i) in selectedMiddleKeywords\" :key=\"i\">{{ item }}</button>\r\n            </div>\r\n            <div class=\"survey_container_footer\">\r\n                <button @click=\"prevPage\" class=\"survey_next_btn\">이전</button>\r\n                <button @click=\"sendSelectedKeyword\" class=\"survey_next_btn\">선택 완료</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport GnbBar from \"../components/gnbBar.vue\";\r\n\r\nimport axios from \"axios\";\r\naxios.defaults.baseURL = \"http://localhost:3000\";\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json;charset=utf-8\";\r\naxios.defaults.headers.post[\"Access-Control-Allow-Origin\"] = \"*\";\r\n\r\nexport default {\r\n    name: \"\",\r\n    components: { GnbBar },\r\n    data() {\r\n        return {\r\n            // 유저 이메일\r\n            email: \"\",\r\n\r\n            currentPage: 1, // 1: 대분류 리스트 출력 2: 소분류 리스트 출력\r\n            selectedCount: 0,\r\n            selectedMainKeywords: [], //선택한 대분류 키워드\r\n            selectedMiddleKeywords: [], //선택한 대분류들의 소분류 키워드\r\n            selectedKeyword: [], //선택한 소분류 키워드\r\n            category: [\r\n                { id: 1, top: \"경제경영\", middle: [\"경제학/경제일반\", \"기업 경영\", \"재테크/투자\"], expanded: false },\r\n                { id: 2, top: \"과학\", middle: [\"기초과학/교양과학\", \"의학\", \"화학\", \"공학\"], expanded: false },\r\n                { id: 3, top: \"사회과학\", middle: [\"비평/칼럼\", \"기업 사회문제\", \" 정치학/외교학/행정학\"], expanded: false },\r\n                { id: 4, top: \"소설/시/희곡\", middle: [\"한국소설\", \"일본소설\", \"영미소설\", \"추리/미스터리소설\", \"과학소설(SF)\", \"호러/공포소설\", \" 액션/스릴러소설\", \"로맨스소설\", \"시\", \"희곡\"], expanded: false },\r\n                { id: 5, top: \"수험서/자격증\", middle: [\"국가기술자격\", \"국가전문자격\", \" 공무원 수험서\", \"한국사능력검정시험\", \"공인중개사/주택관리사\", \"운전면허\", \"컴퓨터 활용능력\", \"편입/검정고시/독학사\"], expanded: false },\r\n                { id: 6, top: \"에세이\", middle: [\"한국에세이\", \"외국에세이\", \"여행에세이\", \"사랑/연애 에세이\", \"자연에세이\"], expanded: false },\r\n                { id: 7, top: \"여행\", middle: [\"서울/수도권 여행가이드\", \"국내 여행가이드\", \"캠핑여행\", \"유럽여행\", \"일본여행\", \"중국여행\", \"동남아시아여행\", \"세계일주여행\"], expanded: false },\r\n                { id: 8, top: \"역사\", middle: [\"동양사 일반\", \"역사학\", \"한국사 일반\", \"한국고대~고려시대\", \"조선사\", \"한국근현대사\", \"아시아사\", \"세계사 일반\"], expanded: false },\r\n                { id: 9, top: \"예술/대중문화\", middle: [\"예술/대중문화의 이해\", \"미술\", \"음악\", \"영화/드라마\", \"사진\", \"건축\", \"뮤지컬/오페라\"], expanded: false },\r\n                { id: 10, top: \"외국어\", middle: [\"어학사전\", \"토익\", \"토플\", \"영어회화\", \"영문법\", \"영어사전\", \"일본어\", \"중국어\", \"한자\", \" 통역/번역\"], expanded: false },\r\n                { id: 11, top: \"요리/살림\", middle: [\"건강요리\", \"다이어트 요리\", \"도시락\", \"디저트\", \"살림/정리수납\", \"술/음료/차\", \"이유식\", \"제과제빵\"], expanded: false },\r\n                { id: 12, top: \"인문학\", middle: [\"교양 인문학\", \"철학 일반\", \"서양철학\", \"동양철학\", \" 심리학/정신분석학\", \"인류학/고고학\"], expanded: false },\r\n                { id: 13, top: \"자기계발\", middle: [\"성공\", \"리더십\", \"인간관계\", \"창의적사고/두뇌계발\", \"취업/진로/유망직업\", \"20대의자기계발\"], expanded: false },\r\n                { id: 14, top: \"장르소설\", middle: [\"추리/미스터리소설\", \" 판타지/환상문학\", \"호러/공포\", \"액션/스릴러\", \"로맨스\"], expanded: false },\r\n                { id: 15, top: \"컴퓨터/모바일\", middle: [\"웹디자인/홈페이지\", \"인공지능\", \"프로그래밍 개발/방법론\", \"프로그래밍 언어\", \"PC/게임/디지털 카메라\"], expanded: false },\r\n            ],\r\n        };\r\n    },\r\n\r\n    setup() {},\r\n    created() {},\r\n    mounted() {\r\n        this.email = localStorage.getItem(\"userID\");\r\n    },\r\n    unmounted() {},\r\n    methods: {\r\n        selectKeyword(event) {\r\n            // 대분류 버튼의 선택 상태를 관리\r\n            const buttonElement = event.target;\r\n            const buttonText = buttonElement.innerText; //클릭한 버튼의 텍스트를 가져와서 buttonText 변수에 저장\r\n\r\n            if (buttonElement.classList.contains(\"survey_selected\")) {\r\n                // 선택 취소 로직\r\n                buttonElement.classList.remove(\"survey_selected\");\r\n                const keywordIndex = this.selectedMainKeywords.indexOf(buttonText);\r\n                if (keywordIndex !== -1) {\r\n                    this.selectedMainKeywords.splice(keywordIndex, 1);\r\n                }\r\n                this.selectedCount--;\r\n            } else if (this.selectedCount < 5) {\r\n                // 선택 로직\r\n                buttonElement.classList.add(\"survey_selected\");\r\n                this.selectedMainKeywords.push(buttonText);\r\n                this.selectedCount++;\r\n            }\r\n        },\r\n        selectSubKeyword(event) {\r\n            // 소분류 버튼의 선택 상태를 관리\r\n            const buttonElement = event.target;\r\n            const buttonText = buttonElement.innerText; //클릭한 버튼의 텍스트를 가져와서 buttonText 변수에 저장\r\n\r\n            if (buttonElement.classList.contains(\"survey_selected\")) {\r\n                // 선택 취소 로직\r\n                buttonElement.classList.remove(\"survey_selected\");\r\n                const keywordIndex = this.selectedKeyword.indexOf(buttonText);\r\n                if (keywordIndex !== -1) {\r\n                    this.selectedKeyword.splice(keywordIndex, 1);\r\n                }\r\n            } else if (this.selectedKeyword.length < 5) {\r\n                // 선택 로직\r\n                buttonElement.classList.add(\"survey_selected\");\r\n                this.selectedKeyword.push(buttonText);\r\n            }\r\n        },\r\n        getSelectedMiddleKeywords() {\r\n            // 선택한 대분류에 해당하는 소분류 키워드를 selectedMiddleKeywords 배열에 업데이트\r\n            //flatMap()은 배열의 각 요소에 대해 주어진 함수를 실행하고, 그 함수의 결과를 모두 하나의 배열로 합침\r\n            this.selectedMiddleKeywords = this.selectedMainKeywords.flatMap((mainKeyword) => {\r\n                const selectedCategory = this.category.find((item) => item.top === mainKeyword);\r\n                if (selectedCategory) {\r\n                    return selectedCategory.middle;\r\n                }\r\n                return [];\r\n            });\r\n        },\r\n        prevPage() {\r\n            this.currentPage = 1;\r\n            this.selectedMainKeywords = [];\r\n        },\r\n        nextPage() {\r\n            if (this.currentPage === 1) {\r\n                this.getSelectedMiddleKeywords();\r\n            }\r\n\r\n            this.currentPage = 2;\r\n            this.selectedCount = 0;\r\n        },\r\n        async sendSelectedKeyword() {\r\n            await axios({\r\n                url: \"http://localhost:3000/sur\",\r\n                method: \"POST\",\r\n                data: {\r\n                    email: this.email,\r\n                    sur1: this.selectedKeyword[0],\r\n                    sur2: this.selectedKeyword[1],\r\n                    sur3: this.selectedKeyword[2],\r\n                    sur4: this.selectedKeyword[3],\r\n                    sur5: this.selectedKeyword[4],\r\n                },\r\n            })\r\n                .then(async (res) => {\r\n                    if (res.data == \"저장 성공\") {\r\n                        alert(\"키워드가 저장되었습니다.\");\r\n                    }\r\n                    location.replace(\"/\");\r\n                })\r\n                .catch((error) => {\r\n                    alert(error);\r\n                });\r\n        },\r\n    },\r\n};\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}