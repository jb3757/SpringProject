{"ast":null,"code":"import { ref, onMounted, reactive } from 'vue';\nimport Chart from 'chart.js/auto';\nimport 'bootstrap'; // Import Bootstrap JavaScript\nimport 'chartjs-adapter-luxon';\nimport SideBar from '../components/adminSidebar.vue';\nimport axios from 'axios';\nexport default {\n  components: {\n    SideBar\n  },\n  data() {\n    return {\n      //유저 나이대\n      ageArangeData: [{\n        id: 1,\n        teenagers: 0\n      }, {\n        id: 2,\n        twenties: 0\n      }, {\n        id: 3,\n        thirties: 0\n      }, {\n        id: 4,\n        forties: 0\n      }, {\n        id: 5,\n        fifties: 0\n      }, {\n        id: 6,\n        sixties: 0\n      }],\n      //매출\n      weekSales: {\n        today: \"\",\n        yesday: \"\",\n        twoDayAgo: \"\",\n        threeDayAgo: \"\",\n        fourDayAgo: \"\",\n        fiveDayAgo: \"\"\n      },\n      //오늘 포함 일주일전까지의 날짜\n      dateRange: [],\n      //오늘 방문자수\n      toDayVisit: 0,\n      userCount: 0,\n      //주간 방문자 수\n      weekVisit: 0,\n      //미완료 문의\n      qnaData: [],\n      //미완료 주문\n      orderData: []\n    };\n  },\n  setup() {\n    const myChart = ref(null);\n    const myChartAge = ref(null);\n    const dailyVisitChart = ref(null);\n\n    // 성별 데이터를 reactive로 정의\n    const userSex = reactive({\n      female: 0,\n      male: 0\n    });\n    // 나이대 데이터를 reactive로 정의\n    const ageArangeData = reactive([{\n      id: 1,\n      teenagers: 0\n    }, {\n      id: 2,\n      twenties: 0\n    }, {\n      id: 3,\n      thirties: 0\n    }, {\n      id: 4,\n      forties: 0\n    }, {\n      id: 5,\n      fifties: 0\n    }, {\n      id: 6,\n      sixties: 0\n    }]);\n    var weekVisit = reactive([{\n      date: \"2023-01-01\",\n      count: 0\n    }, {\n      date: \"2023-01-01\",\n      count: 0\n    }, {\n      date: \"2023-01-01\",\n      count: 0\n    }, {\n      date: \"2023-01-01\",\n      count: 0\n    }, {\n      date: \"2023-01-01\",\n      count: 0\n    }, {\n      date: \"2023-01-01\",\n      count: 0\n    }, {\n      date: \"2023-01-01\",\n      count: 0\n    }]);\n\n    //----------------------------------여기부터 서버에서 데이터 불러오는 함수-------------------------------------\n    // 성별&나이대 데이터를 업데이트하는 함수 정의\n    const updateUserSex = async () => {\n      try {\n        const response = await axios.post('http://localhost:3000/admin/adminUserLatest', {});\n        const data = response.data;\n\n        // 회원수를 저장\n        userSex.female = data.filter(item => item.USER_SEX === 'f').length;\n        userSex.male = data.filter(item => item.USER_SEX === 'm').length;\n\n        //회원 나이대를 저장\n        ageArangeData[0].teenagers = data.filter(item => item.USER_AGEGROUP === \"10\").length;\n        ageArangeData[1].twenties = data.filter(item => item.USER_AGEGROUP === \"20\").length;\n        ageArangeData[2].thirties = data.filter(item => item.USER_AGEGROUP === \"30\").length;\n        ageArangeData[3].forties = data.filter(item => item.USER_AGEGROUP === \"40\").length;\n        ageArangeData[4].fifties = data.filter(item => item.USER_AGEGROUP === \"50\").length;\n        ageArangeData[5].sixties = data.filter(item => item.USER_AGEGROUP === \"60\").length;\n        console.log(ageArangeData, \"나이대 차트 데이터\");\n        // 차트를 다시 그리는 함수 호출\n        drawUserChart(); // 성별 차트\n        drawUserArangeChart(); // 나이대 차트\n      } catch (error) {\n        alert(error);\n      }\n    };\n\n    // 주간 방문자 수 데이터를 업데이트하는 함수 정의\n    const updateWeekVisit = async () => {\n      try {\n        const response = await axios.post('http://localhost:3000/admin/getTotalV', {});\n        const data = response.data.slice(0, 7);\n\n        // 데이터를 주간 방문자 수 배열에 할당\n        weekVisit = data.map(item => {\n          return {\n            date: item.vc_date,\n            count: item.vc_count\n          };\n        });\n        console.log(weekVisit, \"주간 방문자 수 데이터\");\n\n        // 차트를 다시 그리는 함수 호출\n        drawWeekVisitChart();\n      } catch (error) {\n        alert(error);\n      }\n    };\n\n    //----------------------------------여기부터 차트 함수-------------------------------------\n    // 성별 회원 차트를 그리는 함수 정의\n    const drawUserChart = () => {\n      // 이전 차트 인스턴스 제거\n      if (myChart.value && myChart.value.chart) {\n        myChart.value.chart.destroy();\n      }\n      if (myChart.value) {\n        const ctx = myChart.value.getContext('2d');\n        myChart.value.chart = new Chart(ctx, {\n          type: 'doughnut',\n          data: {\n            labels: ['여성', '남성'],\n            datasets: [{\n              data: [userSex.female, userSex.male],\n              backgroundColor: ['#e74a3b', '#4e73df']\n            }]\n          },\n          options: {\n            maintainAspectRatio: false,\n            aspectRatio: 2,\n            cutout: 100,\n            radius: '100%',\n            plugins: {\n              legend: {\n                labels: {\n                  font: {\n                    size: 12,\n                    weight: 'bold'\n                  },\n                  color: '#858796',\n                  pointStyle: 'circle',\n                  usePointStyle: true\n                }\n              }\n            }\n          }\n        });\n      }\n    };\n\n    // 나이대 차트를 그리는 함수 정의\n    const drawUserArangeChart = () => {\n      // 이전 차트 인스턴스 제거\n      if (myChartAge.value && myChartAge.value.chart) {\n        myChartAge.value.chart.destroy();\n      }\n      if (myChartAge.value) {\n        const ctx = myChartAge.value.getContext('2d');\n        myChartAge.value.chart = new Chart(ctx, {\n          type: 'pie',\n          // 차트 종류를 'pie'로 설정\n          data: {\n            labels: ['10대', '20대', '30대', '40대', '50대', '60대'],\n            datasets: [{\n              data: [ageArangeData[0].teenagers, ageArangeData[1].twenties, ageArangeData[2].thirties, ageArangeData[3].forties, ageArangeData[4].fifties, ageArangeData[5].sixties],\n              // 남성과 여성의 데이터를 배열로 설정\n              backgroundColor: ['#E74A3B', '#858796', '#F6C23E', '#4E73DF', '#36B9CC', '#1CC88A']\n            }]\n          },\n          options: {\n            maintainAspectRatio: false,\n            aspectRatio: 1,\n            // 파이 차트는 보통 1:1의 비율을 가집니다.\n            plugins: {\n              legend: {\n                labels: {\n                  font: {\n                    size: 12,\n                    weight: 'bold'\n                  },\n                  color: '#858796',\n                  pointStyle: 'circle',\n                  usePointStyle: true\n                }\n              }\n            }\n          }\n        });\n      }\n    };\n    const drawWeekVisitChart = () => {\n      // 일별 방문자데이터들의 최대값 가져오기\n      const maxCount = Math.max(...weekVisit.map(item => item.count));\n\n      // 이전 차트 인스턴스 제거\n      if (dailyVisitChart.value && dailyVisitChart.value.chart) {\n        dailyVisitChart.value.chart.destroy();\n      }\n      if (dailyVisitChart) {\n        const ctx = dailyVisitChart.value.getContext('2d');\n        dailyVisitChart.value.chart = new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels: [weekVisit[6].date, weekVisit[5].date, weekVisit[4].date, weekVisit[3].date, weekVisit[2].date, weekVisit[1].date, weekVisit[0].date],\n            datasets: [{\n              label: '방문자 수',\n              // Add dataset label\n              data: [weekVisit[0].count, weekVisit[1].count, weekVisit[2].count, weekVisit[3].count, weekVisit[4].count, weekVisit[5].count, weekVisit[6].count],\n              backgroundColor: '#F6C23E',\n              // 반투명 배경색 설정\n              borderColor: '#F6C23E',\n              // 선 색상 설정\n              hoverOffset: 1,\n              fill: true\n            }]\n          },\n          options: {\n            responsive: false,\n            scales: {\n              x: {\n                grid: {\n                  display: false // 배경 세로 선 숨기기\n                }\n              },\n\n              y: {\n                beginAtZero: true // y 축의 값이 0부터 시작하도록 설정\n              }\n            },\n\n            plugins: {\n              tooltip: {\n                padding: 10\n              }\n            }\n          }\n        });\n      }\n    };\n    onMounted(() => {\n      updateUserSex();\n      updateWeekVisit();\n    });\n    return {\n      myChart,\n      myChartAge,\n      dailyVisitChart,\n      userSex // 이렇게 userSex를 반환 객체에 추가\n    };\n  },\n\n  mounted() {\n    this.getUserData();\n    this.updateWeekVisit();\n  },\n  methods: {\n    async getUserData() {\n      await axios({\n        url: \"http://localhost:3000/admin/adminUserLatest\",\n        method: \"POST\",\n        data: {}\n      }).then(res => {\n        //회원수를 저장\n        this.userCount = res.data.length;\n\n        //나이대 저장\n\n        this.ageArangeData[0].teenagers = res.data.filter(item => item.USER_AGEGROUP === \"10\").length;\n        this.ageArangeData[1].twenties = res.data.filter(item => item.USER_AGEGROUP === \"20\").length;\n        this.ageArangeData[2].thirties = res.data.filter(item => item.USER_AGEGROUP === \"30\").length;\n        this.ageArangeData[3].forties = res.data.filter(item => item.USER_AGEGROUP === \"40\").length;\n        this.ageArangeData[4].fifties = res.data.filter(item => item.USER_AGEGROUP === \"50\").length;\n        this.ageArangeData[5].sixties = res.data.filter(item => item.USER_AGEGROUP === \"60\").length;\n        console.log(this.ageArangeData, \"나이대\");\n\n        //성별에 따른 회원수 저장\n        const femaleMembers = res.data.filter(item => item.USER_SEX === 'f');\n        const maleMembers = res.data.filter(item => item.USER_SEX === 'm');\n        this.userSex.female = femaleMembers.length;\n        this.userSex.male = maleMembers.length;\n        console.log(this.userSex, \"회원데이터\");\n      }).catch(err => {\n        alert(err);\n      });\n    },\n    // 주간 방문자수 데이터 받기\n    async updateWeekVisit() {\n      await axios({\n        url: \"http://localhost:3000/admin/getTotalV\",\n        method: \"POST\",\n        data: {}\n      }).then(res => {\n        const data = res.data.slice(0, 7);\n\n        //이전 1주일간 매일 방문자수를 저장\n        data.map(item => this.weekVisit += item.vc_count);\n        console.log(this.weekVisit, \"주간방문자수 데이터\");\n      }).catch(err => {\n        alert(err);\n      });\n    },\n    formatNumber(number) {\n      // 숫자를 천 단위마다 쉼표가 있는 형식으로 변환\n      return new Intl.NumberFormat().format(number);\n    }\n  }\n};","map":{"version":3,"names":["ref","onMounted","reactive","Chart","SideBar","axios","components","data","ageArangeData","id","teenagers","twenties","thirties","forties","fifties","sixties","weekSales","today","yesday","twoDayAgo","threeDayAgo","fourDayAgo","fiveDayAgo","dateRange","toDayVisit","userCount","weekVisit","qnaData","orderData","setup","myChart","myChartAge","dailyVisitChart","userSex","female","male","date","count","updateUserSex","response","post","filter","item","USER_SEX","length","USER_AGEGROUP","console","log","drawUserChart","drawUserArangeChart","error","alert","updateWeekVisit","slice","map","vc_date","vc_count","drawWeekVisitChart","value","chart","destroy","ctx","getContext","type","labels","datasets","backgroundColor","options","maintainAspectRatio","aspectRatio","cutout","radius","plugins","legend","font","size","weight","color","pointStyle","usePointStyle","maxCount","Math","max","label","borderColor","hoverOffset","fill","responsive","scales","x","grid","display","y","beginAtZero","tooltip","padding","mounted","getUserData","methods","url","method","then","res","femaleMembers","maleMembers","catch","err","formatNumber","number","Intl","NumberFormat","format"],"sources":["C:\\Users\\Lim\\Desktop\\BOOK_0728\\MOONMOON\\vue_front\\src\\components\\adminUserAnalyze.vue"],"sourcesContent":["<style scoped src=\"bootstrap/dist/css/bootstrap.css\"></style>\r\n<style scoped src=\"../assets/css/sbadmin.css\"></style>\r\n\r\n\r\n<template>\r\n    <body id=\"page-top\">\r\n\r\n        <!-- Page Wrapper -->\r\n        <div id=\"wrapper\">\r\n\r\n            <!-- Sidebar -->\r\n            <SideBar />\r\n            <!-- End of Sidebar -->\r\n            <!-- Content Wrapper -->\r\n            <div id=\"content-wrapper\" class=\"d-flex flex-column\">\r\n\r\n                <!-- Main Content -->\r\n                <div id=\"content\">\r\n\r\n                    <!-- Topbar -->\r\n                    <nav\r\n                        class=\"navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow d-flex align-items-center justify-content-center\">\r\n                        <h1><a class=\"text-gray-800\" href=\"/\" style=\"text-decoration: none;\">MOONMOON</a></h1>\r\n                    </nav>\r\n                    <!-- End of Topbar -->\r\n\r\n                    <!-- Begin Page Content -->\r\n                    <div class=\"container-fluid\">\r\n\r\n                        <!-- Page Heading -->\r\n                        <div class=\"d-sm-flex align-items-center justify-content-between mb-4\">\r\n                            <h1 class=\"h3 mb-0 text-gray-800\">회원 분석</h1>\r\n                        </div>\r\n\r\n\r\n                        <!-- Content Row -->\r\n                        <div class=\"row d-flex align-items-center justify-content-center\">\r\n\r\n                            <!-- Earnings (Monthly) Card Example -->\r\n                            <div class=\"col-lg-2 col-md-6 mb-4\">\r\n                                <div class=\"card border-bottom-primary shadow h-100\">\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"row no-gutters align-items-center\">\r\n                                            <div class=\"col mr-2\">\r\n                                                <div class=\"text-xs font-weight-bold text-primary text-uppercase mb-1\">\r\n                                                    남성 회원수</div>\r\n                                                <div class=\"h5 mb-0 font-weight-bold text-gray-800\">\r\n                                                    {{ formatNumber(userSex.female) }}명</div>\r\n                                            </div>\r\n                                            <div class=\"col-auto\">\r\n                                                <i class=\"fa-solid fa-user fa-2x text-gray-300\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Earnings (Monthly) Card Example -->\r\n                            <div class=\"col-lg-2 col-md-6 mb-4\">\r\n                                <div class=\"card border-bottom-danger shadow h-100\">\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"row no-gutters align-items-center\">\r\n                                            <div class=\"col mr-2\">\r\n                                                <div class=\"text-xs font-weight-bold text-danger text-uppercase mb-1\">\r\n                                                    여성 회원수</div>\r\n                                                <div class=\"h5 mb-0 font-weight-bold text-gray-800\">\r\n                                                    {{ formatNumber(userSex.male) }}명\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-auto\">\r\n                                                <i class=\"fa-solid fa-user fa-2x text-gray-300\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Earnings (Monthly) Card Example -->\r\n\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row d-flex align-items-center justify-content-center pb-5\">\r\n                            <!-- Pie Chart -->\r\n                            <div class=\"col-xl-6 col-lg-5\">\r\n                                <div class=\"card shadow mb-4\">\r\n                                    <!-- Card Header - Dropdown -->\r\n                                    <div\r\n                                        class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\">\r\n                                        <h6 class=\"m-0 font-weight-bold text-primary\">성별 분포</h6>\r\n                                    </div>\r\n                                    <!-- Card Body -->\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"chart-area\">\r\n                                            <!-- 성별 도넛차트 -->\r\n                                            <canvas ref=\"myChart\"></canvas>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"border border-secondary mb-5\"></div>\r\n\r\n                        <div class=\"row d-flex align-items-center justify-content-center\">\r\n                            <div v-for=\"i in 6\" :key=\"i\" class=\"mb-4\" style=\"width: 10%;\">\r\n                                <div class=\"card shadow h-100 mb-5\" :class=\"{\r\n                                    'cardshadow h-100 mb-5 border-bottom-danger': i === 1,\r\n                                    'cardshadow h-100 mb-5 border-bottom-secondary': i === 2,\r\n                                    'cardshadow h-100 mb-5 border-bottom-warning': i === 3,\r\n                                    'cardshadow h-100 mb-5 border-bottom-primary': i === 4,\r\n                                    'cardshadow h-100 mb-5 border-bottom-info': i === 5,\r\n                                    'cardshadow h-100 mb-5 border-bottom-success': i === 6,\r\n                                }\">\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"row no-gutters align-items-center\">\r\n                                            <div class=\"col mr-2\">\r\n                                                <div class=\"text-xs font-weight-bold text-secondary text-uppercase mb-1\"\r\n                                                    :class=\"{\r\n                                                        'text-danger': i === 1,\r\n                                                        'text-secondary': i === 2,\r\n                                                        'text-warning': i === 3,\r\n                                                        'text-primary': i === 4,\r\n                                                        'text-info': i === 5,\r\n                                                        'text-success': i === 6,\r\n                                                    }\">\r\n                                                    {{ i }}0대\r\n                                                </div>\r\n                                                <div class=\"row no-gutters align-items-center\">\r\n                                                    <div class=\"col-auto\">\r\n                                                        <div class=\"h5 mb-0 mr-3 font-weight-bold text-gray-800\">\r\n                                                            {{ formatNumber(ageArangeData[i - 1][i === 1 ? 'teenagers' : i\r\n                                                                === 2 ? 'twenties' : i === 3 ? 'thirties' : i === 4 ? 'forties'\r\n                                                                    : i === 5 ? 'fifties' : 'sixties']) }}명</div>\r\n                                                    </div>\r\n                                                    <div class=\"col\">\r\n                                                        <div class=\"progress progress-sm mr-2\">\r\n                                                            <div class=\"progress-bar bg-warning\" role=\"progressbar\"\r\n                                                                style=\"width: 50%\" aria-valuenow=\"50\" aria-valuemin=\"0\"\r\n                                                                aria-valuemax=\"100\"></div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-auto\">\r\n                                                <i class=\"fa-solid fa-user fa-xl text-gray-300\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div class=\"row d-flex align-items-center justify-content-center pb-5\">\r\n\r\n                            <!-- Pie Chart -->\r\n                            <div class=\"col-xl-6 col-lg-5\">\r\n                                <div class=\"card shadow mb-4\">\r\n                                    <!-- Card Header - Dropdown -->\r\n                                    <div\r\n                                        class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\">\r\n                                        <h6 class=\"m-0 font-weight-bold text-primary\">나이대 분포</h6>\r\n                                    </div>\r\n                                    <!-- Card Body -->\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"chart-area\">\r\n                                            <!-- 나이대 파이차트 -->\r\n                                            <canvas ref=\"myChartAge\"></canvas>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"border border-secondary mb-5\"></div>\r\n\r\n                        <!-- Content Row -->\r\n                        <div class=\"row d-flex align-items-center justify-content-center\">\r\n                            <div class=\"col-lg-2 col-md-6 mb-4\">\r\n                                <div class=\"card border-bottom-warning shadow h-100\">\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"row no-gutters align-items-center\">\r\n                                            <div class=\"col mr-2\">\r\n                                                <div class=\"text-xs font-weight-bold text-warning text-uppercase mb-1\">\r\n                                                    주간 방문자 수\r\n                                                </div>\r\n                                                <div class=\"row no-gutters align-items-center\">\r\n                                                    <div class=\"col-auto\">\r\n                                                        <div class=\"h5 mb-0 mr-3 font-weight-bold text-gray-800\">\r\n                                                            {{ formatNumber(weekVisit) }}</div>\r\n                                                    </div>\r\n                                                    <div class=\"col\">\r\n                                                        <div class=\"progress progress-sm mr-2\">\r\n                                                            <div class=\"progress-bar bg-warning\" role=\"progressbar\"\r\n                                                                style=\"width: 50%\" aria-valuenow=\"50\" aria-valuemin=\"0\"\r\n                                                                aria-valuemax=\"100\"></div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-auto\">\r\n                                                <i class=\"fa-solid fa-eye fa-2x text-gray-300\"></i>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"row d-flex align-items-center justify-content-center\">\r\n                            <!-- Area Chart -->\r\n                            <div class=\"col-xl-8 col-lg-7\">\r\n                                <div class=\"card shadow mb-4\">\r\n                                    <!-- Card Header - Dropdown -->\r\n                                    <div\r\n                                        class=\"card-header py-3 d-flex flex-row align-items-center justify-content-between\">\r\n                                        <h6 class=\"m-0 font-weight-bold text-primary\">주간 방문자</h6>\r\n\r\n                                    </div>\r\n                                    <!-- Card Body -->\r\n                                    <div class=\"card-body\">\r\n                                        <div class=\"chart-area d-flex align-items-center justify-content-center\">\r\n                                            <canvas ref=\"dailyVisitChart\" width=\"900\" height=\"300\"></canvas>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </div>\r\n                    <!-- /.container-fluid -->\r\n\r\n                </div>\r\n                <!-- End of Main Content -->\r\n\r\n                <!-- Footer -->\r\n                <footer class=\"sticky-footer bg-white\">\r\n                    <div class=\"container my-auto\">\r\n                        <div class=\"copyright text-center my-auto\">\r\n                            <span>Copyright &copy; Your Website 2023</span>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n                <!-- End of Footer -->\r\n\r\n            </div>\r\n            <!-- End of Content Wrapper -->\r\n\r\n        </div>\r\n        <!-- End of Page Wrapper -->\r\n\r\n        <!-- Scroll to Top Button-->\r\n        <a class=\"scroll-to-top rounded\" href=\"#page-top\">\r\n            <i class=\"fas fa-angle-up\"></i>\r\n        </a>\r\n\r\n    </body>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, reactive } from 'vue';\r\nimport Chart from 'chart.js/auto';\r\nimport 'bootstrap'; // Import Bootstrap JavaScript\r\nimport 'chartjs-adapter-luxon';\r\nimport SideBar from '../components/adminSidebar.vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    components: { SideBar },\r\n    data() {\r\n        return {\r\n            //유저 나이대\r\n            ageArangeData: [\r\n                {\r\n                    id: 1,\r\n                    teenagers: 0,\r\n                },\r\n                {\r\n                    id: 2,\r\n                    twenties: 0,\r\n                },\r\n                {\r\n                    id: 3,\r\n                    thirties: 0,\r\n                },\r\n                {\r\n                    id: 4,\r\n                    forties: 0,\r\n                },\r\n                {\r\n                    id: 5,\r\n                    fifties: 0,\r\n                },\r\n                {\r\n                    id: 6,\r\n                    sixties: 0,\r\n                },\r\n            ],\r\n            //매출\r\n            weekSales: {\r\n                today: \"\",\r\n                yesday: \"\",\r\n                twoDayAgo: \"\",\r\n                threeDayAgo: \"\",\r\n                fourDayAgo: \"\",\r\n                fiveDayAgo: \"\",\r\n            },\r\n            //오늘 포함 일주일전까지의 날짜\r\n            dateRange: [],\r\n\r\n            //오늘 방문자수\r\n            toDayVisit: 0,\r\n            userCount: 0,\r\n\r\n            //주간 방문자 수\r\n            weekVisit: 0,\r\n\r\n            //미완료 문의\r\n            qnaData: [],\r\n\r\n            //미완료 주문\r\n            orderData: [],\r\n        }\r\n    },\r\n    setup() {\r\n        const myChart = ref(null);\r\n        const myChartAge = ref(null);\r\n        const dailyVisitChart = ref(null);\r\n\r\n        // 성별 데이터를 reactive로 정의\r\n        const userSex = reactive({\r\n            female: 0,\r\n            male: 0,\r\n        });\r\n        // 나이대 데이터를 reactive로 정의\r\n        const ageArangeData = reactive(\r\n            [\r\n                {\r\n                    id: 1,\r\n                    teenagers: 0,\r\n                },\r\n                {\r\n                    id: 2,\r\n                    twenties: 0,\r\n                },\r\n                {\r\n                    id: 3,\r\n                    thirties: 0,\r\n                },\r\n                {\r\n                    id: 4,\r\n                    forties: 0,\r\n                },\r\n                {\r\n                    id: 5,\r\n                    fifties: 0,\r\n                },\r\n                {\r\n                    id: 6,\r\n                    sixties: 0,\r\n                },\r\n            ]\r\n        );\r\n\r\n        var weekVisit = reactive([\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n            {\r\n                date: \"2023-01-01\",\r\n                count: 0,\r\n            },\r\n        ]);\r\n\r\n        //----------------------------------여기부터 서버에서 데이터 불러오는 함수-------------------------------------\r\n        // 성별&나이대 데이터를 업데이트하는 함수 정의\r\n        const updateUserSex = async () => {\r\n            try {\r\n                const response = await axios.post('http://localhost:3000/admin/adminUserLatest', {});\r\n                const data = response.data;\r\n\r\n                // 회원수를 저장\r\n                userSex.female = data.filter(item => item.USER_SEX === 'f').length;\r\n                userSex.male = data.filter(item => item.USER_SEX === 'm').length;\r\n\r\n                //회원 나이대를 저장\r\n                ageArangeData[0].teenagers = data.filter(item => item.USER_AGEGROUP === \"10\").length;\r\n                ageArangeData[1].twenties = data.filter(item => item.USER_AGEGROUP === \"20\").length;\r\n                ageArangeData[2].thirties = data.filter(item => item.USER_AGEGROUP === \"30\").length;\r\n                ageArangeData[3].forties = data.filter(item => item.USER_AGEGROUP === \"40\").length;\r\n                ageArangeData[4].fifties = data.filter(item => item.USER_AGEGROUP === \"50\").length;\r\n                ageArangeData[5].sixties = data.filter(item => item.USER_AGEGROUP === \"60\").length;\r\n                console.log(ageArangeData, \"나이대 차트 데이터\")\r\n                // 차트를 다시 그리는 함수 호출\r\n                drawUserChart(); // 성별 차트\r\n                drawUserArangeChart(); // 나이대 차트\r\n            } catch (error) {\r\n                alert(error);\r\n            }\r\n        };\r\n\r\n        // 주간 방문자 수 데이터를 업데이트하는 함수 정의\r\n        const updateWeekVisit = async () => {\r\n            try {\r\n                const response = await axios.post('http://localhost:3000/admin/getTotalV', {});\r\n                const data = response.data.slice(0, 7);\r\n\r\n                // 데이터를 주간 방문자 수 배열에 할당\r\n                weekVisit = data.map(item => {\r\n                    return {\r\n                        date: item.vc_date,\r\n                        count: item.vc_count\r\n                    };\r\n                });\r\n\r\n                console.log(weekVisit, \"주간 방문자 수 데이터\");\r\n\r\n                // 차트를 다시 그리는 함수 호출\r\n                drawWeekVisitChart();\r\n            } catch (error) {\r\n                alert(error);\r\n            }\r\n        };\r\n\r\n        //----------------------------------여기부터 차트 함수-------------------------------------\r\n        // 성별 회원 차트를 그리는 함수 정의\r\n        const drawUserChart = () => {\r\n            // 이전 차트 인스턴스 제거\r\n            if (myChart.value && myChart.value.chart) {\r\n                myChart.value.chart.destroy();\r\n            }\r\n\r\n\r\n            if (myChart.value) {\r\n                const ctx = myChart.value.getContext('2d');\r\n                myChart.value.chart = new Chart(ctx, {\r\n                    type: 'doughnut',\r\n                    data: {\r\n                        labels: ['여성', '남성'],\r\n                        datasets: [\r\n                            {\r\n                                data: [userSex.female, userSex.male],\r\n                                backgroundColor: ['#e74a3b', '#4e73df'],\r\n                            },\r\n                        ],\r\n                    },\r\n                    options: {\r\n                        maintainAspectRatio: false,\r\n                        aspectRatio: 2,\r\n                        cutout: 100,\r\n                        radius: '100%',\r\n                        plugins: {\r\n                            legend: {\r\n                                labels: {\r\n                                    font: {\r\n                                        size: 12,\r\n                                        weight: 'bold',\r\n                                    },\r\n                                    color: '#858796',\r\n                                    pointStyle: 'circle',\r\n                                    usePointStyle: true,\r\n                                },\r\n                            },\r\n                        },\r\n                    },\r\n                });\r\n            }\r\n        };\r\n\r\n        // 나이대 차트를 그리는 함수 정의\r\n        const drawUserArangeChart = () => {\r\n            // 이전 차트 인스턴스 제거\r\n            if (myChartAge.value && myChartAge.value.chart) {\r\n                myChartAge.value.chart.destroy();\r\n            }\r\n\r\n\r\n            if (myChartAge.value) {\r\n                const ctx = myChartAge.value.getContext('2d');\r\n                myChartAge.value.chart = new Chart(ctx, {\r\n                    type: 'pie', // 차트 종류를 'pie'로 설정\r\n                    data: {\r\n                        labels: ['10대', '20대', '30대', '40대', '50대', '60대'],\r\n                        datasets: [\r\n                            {\r\n                                data: [ageArangeData[0].teenagers,\r\n                                ageArangeData[1].twenties,\r\n                                ageArangeData[2].thirties,\r\n                                ageArangeData[3].forties,\r\n                                ageArangeData[4].fifties,\r\n                                ageArangeData[5].sixties\r\n                                ], // 남성과 여성의 데이터를 배열로 설정\r\n                                backgroundColor: ['#E74A3B', '#858796', '#F6C23E', '#4E73DF', '#36B9CC', '#1CC88A'],\r\n                            },\r\n                        ],\r\n                    },\r\n                    options: {\r\n                        maintainAspectRatio: false,\r\n                        aspectRatio: 1, // 파이 차트는 보통 1:1의 비율을 가집니다.\r\n                        plugins: {\r\n                            legend: {\r\n                                labels: {\r\n                                    font: {\r\n                                        size: 12,\r\n                                        weight: 'bold',\r\n                                    },\r\n                                    color: '#858796',\r\n                                    pointStyle: 'circle',\r\n                                    usePointStyle: true,\r\n                                },\r\n                            },\r\n                        },\r\n                    },\r\n                });\r\n            }\r\n        };\r\n\r\n        const drawWeekVisitChart = () => {\r\n            // 일별 방문자데이터들의 최대값 가져오기\r\n            const maxCount = Math.max(...weekVisit.map(item => item.count));\r\n\r\n            // 이전 차트 인스턴스 제거\r\n            if (dailyVisitChart.value && dailyVisitChart.value.chart) {\r\n                dailyVisitChart.value.chart.destroy();\r\n            }\r\n\r\n            if (dailyVisitChart) {\r\n                const ctx = dailyVisitChart.value.getContext('2d');\r\n                dailyVisitChart.value.chart = new Chart(ctx, {\r\n                    type: 'bar',\r\n                    data: {\r\n                        labels: [\r\n                            weekVisit[6].date,\r\n                            weekVisit[5].date,\r\n                            weekVisit[4].date,\r\n                            weekVisit[3].date,\r\n                            weekVisit[2].date,\r\n                            weekVisit[1].date,\r\n                            weekVisit[0].date,\r\n                        ],\r\n                        datasets: [\r\n                            {\r\n                                label: '방문자 수', // Add dataset label\r\n                                data: [weekVisit[0].count, weekVisit[1].count, weekVisit[2].count, weekVisit[3].count, weekVisit[4].count, weekVisit[5].count, weekVisit[6].count],\r\n                                backgroundColor: '#F6C23E', // 반투명 배경색 설정\r\n                                borderColor: '#F6C23E', // 선 색상 설정\r\n                                hoverOffset: 1,\r\n                                fill: true,\r\n                            },\r\n                        ],\r\n                    },\r\n                    options: {\r\n                        responsive: false,\r\n                        scales: {\r\n                            x: {\r\n                                grid: {\r\n                                    display: false, // 배경 세로 선 숨기기\r\n                                },\r\n                            },\r\n                            y: {\r\n                                beginAtZero: true, // y 축의 값이 0부터 시작하도록 설정\r\n\r\n                            },\r\n                        },\r\n                        plugins: {\r\n                            tooltip: {\r\n                                padding: 10,\r\n                            },\r\n                        },\r\n                    },\r\n                });\r\n            }\r\n        };\r\n\r\n        onMounted(() => {\r\n            updateUserSex();\r\n            updateWeekVisit();\r\n\r\n\r\n\r\n\r\n        });\r\n\r\n        return {\r\n            myChart,\r\n            myChartAge,\r\n            dailyVisitChart,\r\n            userSex, // 이렇게 userSex를 반환 객체에 추가\r\n        };\r\n    },\r\n    mounted() {\r\n        this.getUserData();\r\n        this.updateWeekVisit();\r\n    },\r\n    methods: {\r\n        async getUserData() {\r\n            await axios({\r\n                url: \"http://localhost:3000/admin/adminUserLatest\",\r\n                method: \"POST\",\r\n                data: {\r\n                },\r\n            })\r\n                .then((res) => {\r\n                    //회원수를 저장\r\n                    this.userCount = res.data.length;\r\n\r\n                    //나이대 저장\r\n\r\n                    this.ageArangeData[0].teenagers = res.data.filter(item => item.USER_AGEGROUP === \"10\").length;\r\n                    this.ageArangeData[1].twenties = res.data.filter(item => item.USER_AGEGROUP === \"20\").length;\r\n                    this.ageArangeData[2].thirties = res.data.filter(item => item.USER_AGEGROUP === \"30\").length;\r\n                    this.ageArangeData[3].forties = res.data.filter(item => item.USER_AGEGROUP === \"40\").length;\r\n                    this.ageArangeData[4].fifties = res.data.filter(item => item.USER_AGEGROUP === \"50\").length;\r\n                    this.ageArangeData[5].sixties = res.data.filter(item => item.USER_AGEGROUP === \"60\").length;\r\n                    console.log(this.ageArangeData, \"나이대\")\r\n\r\n                    //성별에 따른 회원수 저장\r\n                    const femaleMembers = res.data.filter(item => item.USER_SEX === 'f');\r\n                    const maleMembers = res.data.filter(item => item.USER_SEX === 'm');\r\n\r\n                    this.userSex.female = femaleMembers.length;\r\n                    this.userSex.male = maleMembers.length;\r\n                    console.log(this.userSex, \"회원데이터\")\r\n                })\r\n                .catch((err) => {\r\n                    alert(err);\r\n                });\r\n        },\r\n        // 주간 방문자수 데이터 받기\r\n        async updateWeekVisit() {\r\n            await axios({\r\n                url: \"http://localhost:3000/admin/getTotalV\",\r\n                method: \"POST\",\r\n                data: {\r\n                },\r\n            })\r\n                .then((res) => {\r\n                    const data = res.data.slice(0, 7);\r\n\r\n                    //이전 1주일간 매일 방문자수를 저장\r\n                    data.map(item => this.weekVisit += item.vc_count);\r\n                    console.log(this.weekVisit, \"주간방문자수 데이터\")\r\n                })\r\n                .catch((err) => {\r\n                    alert(err);\r\n                });\r\n        },\r\n        formatNumber(number) {\r\n            // 숫자를 천 단위마다 쉼표가 있는 형식으로 변환\r\n            return new Intl.NumberFormat().format(number);\r\n        },\r\n    }\r\n};\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}