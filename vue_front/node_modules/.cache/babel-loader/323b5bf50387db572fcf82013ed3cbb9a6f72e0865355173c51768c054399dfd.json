{"ast":null,"code":"import axios from \"axios\";\nimport myPageSide from \"../components/myPageSide.vue\";\nimport myPage_top from \"../components/myPage_top.vue\";\nimport TabsWrapper from \"../components/TabsWrapper.vue\";\nimport TabItem from \"../components/TabItem.vue\";\n\n// Format the date in YY-MM-DD format\nconst formattedDate = date => {\n  const year = date.getFullYear().toString().substr(-2);\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = date.getDate().toString().padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n};\nexport default {\n  components: {\n    myPageSide,\n    myPage_top,\n    TabsWrapper,\n    TabItem\n  },\n  data() {\n    return {\n      reviewList: [],\n      writtenReview: [],\n      book_cover: \"\",\n      orderitem_confirmed_At: \"\",\n      book_title: \"\",\n      book_author: \"\",\n      point: \"300P\",\n      currentPage: 1,\n      itemsPerPage: 10\n    };\n  },\n  async mounted() {\n    try {\n      const email = localStorage.getItem(\"userID\");\n      const response = await axios.get(`mypage/notYetReview/${email}`);\n      this.reviewList = response.data; // API에서 받아온 모든 데이터를 reviewList에 할당\n\n      // 작성한 리뷰 데이터를 가져오는 요청\n      const writtenReviewResponse = await axios.get(`review/myreviewdata/${email}`);\n      this.writtenReview = writtenReviewResponse.data.myReviews;\n      console.log(this.reviewList);\n      console.log(this.writtenReview);\n      if (this.reviewList.length > 0) {\n        const data = this.reviewList[0]; // 첫 번째 데이터를 가져와서 사용\n        this.book_cover = data.book_cover;\n        this.book_title = data.book_title;\n        this.book_author = data.book_author;\n        const orderConfirmedDate = new Date(data.ORDERITEM_CONFIRMED_AT);\n        this.orderitem_confirmed_At = formattedDate(orderConfirmedDate);\n        this.deadline = formattedDate(new Date(orderConfirmedDate.getTime() + 30 * 24 * 60 * 60 * 1000));\n        console.log(\"구매확정일:\", this.orderitem_confirmed_At);\n        console.log(\"작성기한:\", this.deadline);\n      } else {\n        console.log(\"No data found in the response.\");\n      }\n      if (this.writtenReview.length > 0) {\n        this.writtenReview = this.writtenReview.map(review => {\n          const rev_created_at = new Date(review.REV_CREATED_AT);\n          return {\n            book_cover: review.book_cover,\n            book_title: review.book_title,\n            book_author: review.book_author,\n            rev_rating: review.REV_RATING,\n            rev_comment: review.REV_COMMENT,\n            rev_created_at: formattedDate(rev_created_at)\n          };\n        });\n      } else {\n        console.log(\"No data found in the response.\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    }\n  },\n  computed: {\n    totalPages() {\n      return Math.ceil(this.reviewList.length / this.itemsPerPage);\n    },\n    displayedReviews() {\n      const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n      const endIndex = startIndex + this.itemsPerPage;\n      return this.reviewList.slice(startIndex, endIndex);\n    }\n  },\n  methods: {\n    formattedDate(date) {\n      const orderConfirmedDate = new Date(date);\n      const year = orderConfirmedDate.getFullYear().toString().substr(-2);\n      const month = (orderConfirmedDate.getMonth() + 1).toString().padStart(2, \"0\");\n      const day = orderConfirmedDate.getDate().toString().padStart(2, \"0\");\n      return `${year}-${month}-${day}`;\n    },\n    calculateDeadline(confirmDate) {\n      const orderConfirmedDate = new Date(confirmDate);\n      return formattedDate(new Date(orderConfirmedDate.getTime() + 30 * 24 * 60 * 60 * 1000));\n    }\n  },\n  changePage(pageNumber) {\n    this.currentPage = pageNumber;\n  }\n};","map":{"version":3,"names":["axios","myPageSide","myPage_top","TabsWrapper","TabItem","formattedDate","date","year","getFullYear","toString","substr","month","getMonth","padStart","day","getDate","components","data","reviewList","writtenReview","book_cover","orderitem_confirmed_At","book_title","book_author","point","currentPage","itemsPerPage","mounted","email","localStorage","getItem","response","get","writtenReviewResponse","myReviews","console","log","length","orderConfirmedDate","Date","ORDERITEM_CONFIRMED_AT","deadline","getTime","map","review","rev_created_at","REV_CREATED_AT","rev_rating","REV_RATING","rev_comment","REV_COMMENT","error","computed","totalPages","Math","ceil","displayedReviews","startIndex","endIndex","slice","methods","calculateDeadline","confirmDate","changePage","pageNumber"],"sources":["C:\\Users\\Lim\\Desktop\\BOOK_0728\\MOONMOON\\vue_front\\src\\views\\mypageReview.vue"],"sourcesContent":["<template>\r\n    <myPage_top />\r\n    <div class=\"mypage_menu\">\r\n        <myPageSide />\r\n    </div>\r\n\r\n    <div class=\"right_box\">\r\n        <section class=\"tabWrap\">\r\n            <TabsWrapper>\r\n                <TabItem title=\"작성가능한 리뷰\">\r\n                    <div>\r\n                        <div v-for=\"(review, index) in reviewList\" :key=\"index\" class=\"review-info\">\r\n                            <div class=\"info-item book-cover\" style=\"justify-content: flex-start\">\r\n                                <div class=\"info-title\"></div>\r\n                                <img :src=\"review.book_cover\" alt=\"북커버 이미지\" class=\"info-content\" />\r\n                            </div>\r\n                            <div class=\"info-item1\">\r\n                                <div class=\"info-title\">구매확정일 : {{ formattedDate(review.ORDERITEM_CONFIRMED_AT) }}</div>\r\n\r\n                                <div class=\"info-title.book-title\">{{ review.book_title }}</div>\r\n\r\n                                <div class=\"info-title.book-author\">{{ review.book_author }}</div>\r\n                            </div>\r\n\r\n                            <div class=\"info-item2\">\r\n                                <a href=\"/detail\"><button class=\"review-button\">리뷰 쓰기</button></a>\r\n                                <div class=\"info-title.deadline\">작성기한</div>\r\n                                <div class=\"info-content.deadline\">{{ calculateDeadline(review.ORDERITEM_CONFIRMED_AT) }}</div>\r\n                                <div class=\"info-title.point\">포인트</div>\r\n                                <div class=\"info-content.point\">300P</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"pagination\">\r\n                        <button v-for=\"pageNumber in totalPages\" :key=\"pageNumber\" @click=\"changePage(pageNumber)\">\r\n                            {{ pageNumber }}\r\n                        </button>\r\n                    </div>\r\n                </TabItem>\r\n                <TabItem title=\"작성한 리뷰\">\r\n                    <div>\r\n                        <!-- 작성한 리뷰 데이터를 순회하며 표시 -->\r\n                        <div v-for=\"(review, index) in writtenReview\" :key=\"index\" class=\"review-info\">\r\n                            <div class=\"info-item book-cover\" style=\"justify-content: flex-start\">\r\n                                <img :src=\"book_cover\" alt=\"북커버 이미지\" class=\"info-content\" />\r\n                            </div>\r\n                            <div class=\"info-item1\">\r\n                                <div class=\"info-title book-title\">{{ review.book_title }}</div>\r\n                                <div class=\"info-title book-author\">{{ book_author }}</div>\r\n                                <div class=\"info-title review-rating\">별점: {{ review.rev_rating }} 점</div>\r\n                                <div class=\"info-title review-comment\">리뷰: {{ review.rev_comment }}</div>\r\n                            </div>\r\n                            <div class=\"info-item2\">\r\n                                <div class=\"info-title review-created-at\">작성일: {{ review.rev_created_at }}</div>\r\n                                <div class=\"info-title review-rating\">별점: {{ review.rev_rating }} 점</div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- 페이지네이션 버튼 -->\r\n                        <div class=\"pagination\">\r\n                            <button v-for=\"pageNumber in totalPages\" :key=\"pageNumber\" @click=\"changePage(pageNumber)\">\r\n                                {{ pageNumber }}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </TabItem>\r\n            </TabsWrapper>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport myPageSide from \"../components/myPageSide.vue\";\r\nimport myPage_top from \"../components/myPage_top.vue\";\r\nimport TabsWrapper from \"../components/TabsWrapper.vue\";\r\nimport TabItem from \"../components/TabItem.vue\";\r\n\r\n// Format the date in YY-MM-DD format\r\nconst formattedDate = (date) => {\r\n    const year = date.getFullYear().toString().substr(-2);\r\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n    const day = date.getDate().toString().padStart(2, \"0\");\r\n    return `${year}-${month}-${day}`;\r\n};\r\n\r\nexport default {\r\n    components: { myPageSide, myPage_top, TabsWrapper, TabItem },\r\n    data() {\r\n        return {\r\n            reviewList: [],\r\n            writtenReview: [],\r\n            book_cover: \"\",\r\n            orderitem_confirmed_At: \"\",\r\n            book_title: \"\",\r\n            book_author: \"\",\r\n            point: \"300P\",\r\n            currentPage: 1,\r\n            itemsPerPage: 10,\r\n        };\r\n    },\r\n    async mounted() {\r\n        try {\r\n            const email = localStorage.getItem(\"userID\");\r\n            const response = await axios.get(`mypage/notYetReview/${email}`);\r\n            this.reviewList = response.data; // API에서 받아온 모든 데이터를 reviewList에 할당\r\n\r\n            // 작성한 리뷰 데이터를 가져오는 요청\r\n            const writtenReviewResponse = await axios.get(`review/myreviewdata/${email}`);\r\n            this.writtenReview = writtenReviewResponse.data.myReviews;\r\n\r\n            console.log(this.reviewList);\r\n            console.log(this.writtenReview);\r\n\r\n            if (this.reviewList.length > 0) {\r\n                const data = this.reviewList[0]; // 첫 번째 데이터를 가져와서 사용\r\n                this.book_cover = data.book_cover;\r\n                this.book_title = data.book_title;\r\n                this.book_author = data.book_author;\r\n\r\n                const orderConfirmedDate = new Date(data.ORDERITEM_CONFIRMED_AT);\r\n                this.orderitem_confirmed_At = formattedDate(orderConfirmedDate);\r\n                this.deadline = formattedDate(new Date(orderConfirmedDate.getTime() + 30 * 24 * 60 * 60 * 1000));\r\n\r\n                console.log(\"구매확정일:\", this.orderitem_confirmed_At);\r\n                console.log(\"작성기한:\", this.deadline);\r\n            } else {\r\n                console.log(\"No data found in the response.\");\r\n            }\r\n\r\n            if (this.writtenReview.length > 0) {\r\n                this.writtenReview = this.writtenReview.map((review) => {\r\n                    const rev_created_at = new Date(review.REV_CREATED_AT);\r\n                    return {\r\n                        book_cover: review.book_cover,\r\n                        book_title: review.book_title,\r\n                        book_author: review.book_author,\r\n                        rev_rating: review.REV_RATING,\r\n                        rev_comment: review.REV_COMMENT,\r\n                        rev_created_at: formattedDate(rev_created_at),\r\n                    };\r\n                });\r\n            } else {\r\n                console.log(\"No data found in the response.\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching data:\", error);\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        totalPages() {\r\n            return Math.ceil(this.reviewList.length / this.itemsPerPage);\r\n        },\r\n        displayedReviews() {\r\n            const startIndex = (this.currentPage - 1) * this.itemsPerPage;\r\n            const endIndex = startIndex + this.itemsPerPage;\r\n            return this.reviewList.slice(startIndex, endIndex);\r\n        },\r\n    },\r\n    methods: {\r\n        formattedDate(date) {\r\n            const orderConfirmedDate = new Date(date);\r\n            const year = orderConfirmedDate.getFullYear().toString().substr(-2);\r\n            const month = (orderConfirmedDate.getMonth() + 1).toString().padStart(2, \"0\");\r\n            const day = orderConfirmedDate.getDate().toString().padStart(2, \"0\");\r\n            return `${year}-${month}-${day}`;\r\n        },\r\n        calculateDeadline(confirmDate) {\r\n            const orderConfirmedDate = new Date(confirmDate);\r\n            return formattedDate(new Date(orderConfirmedDate.getTime() + 30 * 24 * 60 * 60 * 1000));\r\n        },\r\n    },\r\n    changePage(pageNumber) {\r\n        this.currentPage = pageNumber;\r\n    },\r\n};\r\n</script>\r\n<style scoped>\r\n.review-info {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 10px;\r\n    height: 200px;\r\n    border-bottom: 1px solid rgba(199, 195, 195, 0.267); /* 아래쪽에만 border 추가 */\r\n}\r\n\r\n.info-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\n.info-title {\r\n    font-weight: bold;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.info-item.book-cover {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-start; /* 변경: 북커버 이미지를 왼쪽 정렬 */\r\n    text-align: left; /* 변경: 텍스트는 왼쪽 정렬 */\r\n    margin-right: 20px; /* 변경: 오른쪽 간격 추가 */\r\n}\r\n\r\n.review-button {\r\n    background-color: #5552f7;\r\n    color: white;\r\n    border: none;\r\n    padding: 5px 10px;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n}\r\n.pagination {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 20px;\r\n}\r\n\r\n.pagination button {\r\n    margin: 0 5px;\r\n    padding: 5px 10px;\r\n    background-color: #f0f0f0;\r\n    border: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.pagination button:hover {\r\n    background-color: #ddd;\r\n}\r\n.info-content {\r\n    width: 10%;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}